<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve" xmlns:t="http://www.w3.org/1999/xhtml" xmlns:owl="http://www.odoo.com/owl" xmlns:widget="http://www.odoo.com/widget">
    <!-- Main template for the Cash Recycler App -->
    <t t-name="gas_station_cash.CashRecyclerApp" owl="1">
        <div class="o_cash_recycler_app d-flex flex-column h-100">

            <!-- Top bar with heartbeat icon and control buttons -->
            <div class="o_cash_recycler_header d-flex justify-content-between align-items-center p-2 bg-light border-bottom">

                <!-- Heartbeat Icon -->
                <div class="d-flex align-items-center">
                    <span class="me-2 text-muted">API Status:</span>
                    <svg
                        t-att-class="{
                            'me-3': true,
                            'text-secondary': state.gloryApiStatus === 'connecting',
                            'text-success animate-pulse': state.gloryApiStatus === 'connected',
                            'text-danger': state.gloryApiStatus === 'disconnected'
                        }"
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 24 24"
                        fill="currentColor"
                        width="24" height="24"
                    >
                        <path fill-rule="evenodd" clip-rule="evenodd"
                            d="M12 6.5C10.895 6.5 10 7.395 10 8.5C10 9.605 10.895 10.5 12 10.5C13.105 10.5 14 9.605 14 8.5C14 7.395 13.105 6.5 12 6.5ZM12 12.5C10.895 12.5 10 13.395 10 14.5C10 15.605 10.895 16.5 12 16.5C13.105 16.5 14 15.605 14 14.5C14 13.395 13.105 12.5 12 12.5ZM12 0C5.373 0 0 5.373 0 12C0 18.627 5.373 24 12 24C18.627 24 24 18.627 24 12C24 5.373 18.627 0 12 0ZM12 22C6.477 22 2 17.523 2 12C2 6.477 6.477 2 12 2C17.523 2 22 6.477 22 12C22 17.523 17.523 22 12 22Z"
                        />
                    </svg>
                </div>

                <!-- Control Buttons -->
                <div class="o_cash_recycler_controls btn-group">
                    <button class="btn btn-outline-secondary" t-on-click="_onHome">
                        <i class="fa fa-home me-2"/>Home
                    </button>
                    <button class="btn btn-outline-secondary" t-on-click="_onCheckStatusClick">
                        <i class="fa fa-sync-alt me-2"/>Check Status
                    </button>
                    <button class="btn btn-outline-secondary full-screen-button" t-on-click="_onFullScreen">
                        <i class="fa fa-expand me-2"/>Full Screen
                    </button>
                    <button class="btn btn-outline-secondary exit-full-screen-button" t-on-click="_onExitFullScreen" style="display: none;">
                        <i class="fa fa-compress me-2"/>Exit Full Screen
                    </button>
                </div>
            </div>

            <!-- Main content area with conditional rendering -->
            <div class="o_cash_recycler_content flex-grow-1 d-flex align-items-center justify-content-center p-4">
                <t t-if="state.currentScreen === 'mainMenu'">
                    <div class="container">
                        <div class="row row-cols-3 g-3 text-center">
                            <div class="col">
                                <button class="o_cash_recycler_menu_btn w-100 btn btn-lg btn-success" t-on-click="() => _onMenuButtonClick('oil')">
                                    <span class="d-block h3"><i class="fa fa-tint"/></span>
                                    <span class="d-block">Deposit Oil Sales</span>
                                </button>
                            </div>
                            <div class="col">
                                <button class="o_cash_recycler_menu_btn w-100 btn btn-lg btn-danger" t-on-click="() => _onMenuButtonClick('engine_oil')">
                                    <span class="d-block h3"><i class="fa fa-cogs"/></span>
                                    <span class="d-block">Deposit Engine Oil Sales</span>
                                </button>
                            </div>
                            <div class="col">
                                <button class="o_cash_recycler_menu_btn w-100 btn btn-lg btn-info" t-on-click="() => _onMenuButtonClick('rental')">
                                    <span class="d-block h3"><i class="fa fa-key"/></span>
                                    <span class="d-block">Deposit Rental</span>
                                </button>
                            </div>
                        </div>
                        <div class="row row-cols-4 g-4 text-center">
                            <div class="col">
                                <button class="o_cash_recycler_menu_btn w-100 btn btn-lg btn-primary" t-on-click="() => _onMenuButtonClick('coffee_shop')">
                                    <span class="d-block h3"><i class="fa fa-coffee"/></span>
                                    <span class="d-block">Deposit Coffee Shop Sales</span>
                                </button>
                            </div>
                            <div class="col">
                                <button class="o_cash_recycler_menu_btn w-100 btn btn-lg btn-warning" t-on-click="() => _onMenuButtonClick('convenient_store')">
                                    <span class="d-block h3"><i class="fa fa-shopping-cart"/></span>
                                    <span class="d-block">Deposit Convenient Store Sales</span>
                                </button>
                            </div>
                            <div class="col">
                                <button class="o_cash_recycler_menu_btn w-100 btn btn-lg btn-exchange-cash" t-on-click="() => _onMenuButtonClick('exchange_cash')">
                                    <span class="d-block h3"><i class="fa fa-exchange"/></span>
                                    <span class="d-block">Exchange Notes and Coins</span>
                                </button>
                            </div>
                            <div class="col">
                                <button class="o_cash_recycler_menu_btn w-100 btn btn-lg btn-deposit-cash" t-on-click="() => _onMenuButtonClick('deposit_cash')">
                                    <span class="d-block h3"><i class="fa fa-money"/></span>
                                    <span class="d-block">Deposit Cash</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </t>
                <t t-if="state.currentScreen === 'pinEntry'">
                    <PinEntryScreen
                        depositType="state.selectedDepositType"
                        onLoginSuccess.bind="_onLoginSuccess"
                        onDepositConfirmed.bind="_onDepositConfirmed"
                        onStatusUpdate.bind="_onStatusUpdate"
                        onCancel.bind="_onHome"
                        onApiError.bind="_onApiError"
                    />
                </t>
                <!-- Deposit Cash Screen -->
                <t t-if="state.currentScreen === 'oilDeposit'">
                    <OilDepositScreen
                        onCancel.bind="_onHome"
                        onApiError="_onApiError"
                    />
                </t>
                <!-- Engine Oil Deposit Cash Screen -->
                <t t-if="state.currentScreen === 'engine_oilDeposit'">
                    <EngineOilDepositScreen
                        onCancel.bind="_onHome"
                        onApiError="_onApiError"
                    />
                </t>
                <!-- Rental Deposit Cash Screen -->
                <t t-if="state.currentScreen === 'rentalDeposit'">
                    <RentalDepositScreen
                        onCancel.bind="_onHome"
                        onApiError="_onApiError"
                    />
                </t>
                <!-- Coffee shop Deposit Cash Screen -->
                <t t-if="state.currentScreen === 'coffee_shopDeposit'">
                    <CoffeeShopDepositScreen
                        onCancel.bind="_onHome"
                        onApiError="_onApiError"
                    />
                </t>
                <!-- Convenient store Deposit Cash Screen -->
                <t t-if="state.currentScreen === 'convenient_storeDeposit'">
                    <ConvenientStoreDepositScreen
                        onCancel.bind="_onHome"
                        onApiError="_onApiError"
                    />
                </t>
                <!-- Deposit Cash Screen -->
                <t t-if="state.currentScreen === 'deposit_cashDeposit'">
                    <DepositCashScreen
                        onCancel.bind="_onHome"
                        onApiError="_onApiError"
                    />
                </t>
                <!-- Exchange Cash Screen -->
                <t t-if="state.currentScreen === 'exchange_cash'">
                    <ExchangeCashScreen
                        onCancel.bind="_onHome"
                        onExit.bind="_onHome"
                        onApiError="_onApiError"
                        onHome="_onHome"
                    />
                </t>
            </div>

            <!-- Bottom status bar for detailed messages -->
            <div class="o_cash_recycler_footer p-2 bg-light border-top text-center text-muted">
                <strong t-esc="state.statusMessage"/>
            </div>
        </div>
    </t>
</templates>