<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve" xmlns:t="http://www.w3.org/1999/xhtml" xmlns:owl="http://www.odoo.com/owl">
    <!-- Main template for the Cash Recycler App -->
    <t t-name="gas_station_cash.CashRecyclerApp" owl="1">
        <div class="o_cash_recycler_app">
            <!-- Top bar with heartbeat icon and control buttons -->
            <div class="o_cash_recycler_header">
                <!-- API Status -->
                <div class="api-status-container">
                    <span class="api-status-text">API Status:</span>
                    <div t-att-class="{
                            'api-status-dot': true,
                            'connecting': state.gloryApiStatus === 'connecting',
                            'connected': state.gloryApiStatus === 'connected',
                            'disconnected': state.gloryApiStatus === 'disconnected'
                         }"/>
                    <span class="api-status-label" t-esc="state.gloryApiStatus === 'connected' ? 'Connected' : state.gloryApiStatus === 'connecting' ? 'Connecting...' : 'Disconnected'"/>
                </div>
                
                <!-- Language Switcher for Secondary Language -->
                <div class="o_language_switcher">
                    <t t-if="isPrimaryLang('en')">
                        <button t-att-class="{'lang-btn': true, 'active': state.secondaryLang === 'th_TH'}" t-on-click="() => _onSwitchSecondaryLanguage('th_TH')">TH</button>
                    </t>
                    <t t-else="">
                        <button t-att-class="{'lang-btn': true, 'active': state.secondaryLang === 'en_US'}" t-on-click="() => _onSwitchSecondaryLanguage('en_US')">EN</button>
                    </t>
                    <button t-att-class="{'lang-btn': true, 'active': state.secondaryLang === 'lo_LA'}" t-on-click="() => _onSwitchSecondaryLanguage('lo_LA')">LA</button>
                    <button t-att-class="{'lang-btn': true, 'active': state.secondaryLang === 'my_MM'}" t-on-click="() => _onSwitchSecondaryLanguage('my_MM')">MY</button>
                    <button t-att-class="{'lang-btn': true, 'active': state.secondaryLang === 'km_KH'}" t-on-click="() => _onSwitchSecondaryLanguage('km_KH')">KH</button>
                </div>
                
                <!-- Control Buttons -->
                <div class="o_cash_recycler_controls">
                    <button class="ctrl-btn" t-on-click="_onHome">
                        <i class="fa fa-home"/>
                        <span>Home</span>
                    </button>
                    <button class="ctrl-btn" t-on-click="() => _onMenuButtonClick('deposit_cash')">
                        <i class="fa fa-plus-circle"/>
                        <span>Replenish</span>
                    </button>
                    <button class="ctrl-btn ctrl-btn-warning" t-on-click="_onWithdrawalClick">
                        <i class="fa fa-minus-circle"/>
                        <span>Withdrawal</span>
                    </button>
                    <button class="ctrl-btn" t-on-click="_onCheckStatusClick">
                        <i class="fa fa-sync-alt"/>
                        <span>Status</span>
                    </button>
                    <button class="ctrl-btn full-screen-button" t-on-click="_onFullScreen">
                        <i class="fa fa-expand"/>
                    </button>
                    <button class="ctrl-btn exit-full-screen-button" t-on-click="_onExitFullScreen" style="display: none;">
                        <i class="fa fa-compress"/>
                    </button>
                </div>
            </div>
            
            <!-- Main content area with conditional rendering -->
            <div class="o_cash_recycler_content">
                <t t-if="state.currentScreen === 'mainMenu'">
                    <div class="menu-container">
                        <div class="menu-grid">
                            <!-- Oil Sales - Large -->
                            <button class="menu-card menu-card-large" t-on-click="() => _onMenuButtonClick('oil')">
                                <div class="menu-card-icon">
                                    <img src="/gas_station_cash/static/img/oil_icon.png" alt="Oil"/>
                                </div>
                                <div class="menu-card-text">
                                    <span class="menu-card-title" t-esc="_t('Deposit Oil Sales')"/>
                                    <span class="menu-card-subtitle" t-esc="getSecondaryTranslation('Deposit Oil Sales', state.secondaryLang)"/>
                                </div>
                            </button>
                            
                            <!-- Engine Oil Sales -->
                            <button class="menu-card" t-on-click="() => _onMenuButtonClick('engine_oil')">
                                <div class="menu-card-icon">
                                    <img src="/gas_station_cash/static/img/engine_oil_icon.png" alt="Engine Oil"/>
                                </div>
                                <div class="menu-card-text">
                                    <span class="menu-card-title" t-esc="_t('Deposit Engine Oil')"/>
                                    <span class="menu-card-subtitle" t-esc="getSecondaryTranslation('Deposit Engine Oil Sales', state.secondaryLang)"/>
                                </div>
                            </button>
                            
                            <!-- Exchange Cash -->
                            <button class="menu-card" t-on-click="() => _onMenuButtonClick('exchange_cash')">
                                <div class="menu-card-icon">
                                    <img src="/gas_station_cash/static/img/exchange_icon.png" alt="Exchange"/>
                                </div>
                                <div class="menu-card-text">
                                    <span class="menu-card-title" t-esc="_t('Exchange Cash')"/>
                                    <span class="menu-card-subtitle" t-esc="getSecondaryTranslation('Exchange Notes and Coins', state.secondaryLang)"/>
                                </div>
                            </button>
                            
                            <!-- Coffee Shop -->
                            <button class="menu-card" t-on-click="() => _onMenuButtonClick('coffee_shop')">
                                <div class="menu-card-icon">
                                    <img src="/gas_station_cash/static/img/coffee_shop_icon.png" alt="Coffee"/>
                                </div>
                                <div class="menu-card-text">
                                    <span class="menu-card-title" t-esc="_t('Coffee Shop')"/>
                                    <span class="menu-card-subtitle" t-esc="getSecondaryTranslation('Deposit Coffee Shop Sales', state.secondaryLang)"/>
                                </div>
                            </button>
                            
                            <!-- Convenient Store -->
                            <button class="menu-card" t-on-click="() => _onMenuButtonClick('convenient_store')">
                                <div class="menu-card-icon">
                                    <img src="/gas_station_cash/static/img/convenient_store_icon.png" alt="Store"/>
                                </div>
                                <div class="menu-card-text">
                                    <span class="menu-card-title" t-esc="_t('Convenient Store')"/>
                                    <span class="menu-card-subtitle" t-esc="getSecondaryTranslation('Deposit Convenient Store Sales', state.secondaryLang)"/>
                                </div>
                            </button>
                            
                            <!-- Rental -->
                            <button class="menu-card" t-on-click="() => _onMenuButtonClick('rental')">
                                <div class="menu-card-icon">
                                    <img src="/gas_station_cash/static/img/rental_icon.png" alt="Rental"/>
                                </div>
                                <div class="menu-card-text">
                                    <span class="menu-card-title" t-esc="_t('Deposit Rental')"/>
                                    <span class="menu-card-subtitle" t-esc="getSecondaryTranslation('Deposit Rental', state.secondaryLang)"/>
                                </div>
                            </button>
                        </div>
                    </div>
                </t>
                
                <!-- PIN Entry Screen -->
                <t t-if="state.currentScreen === 'pinEntry'">
                    <PinEntryScreen
                        depositType="state.selectedDepositType"
                        onLoginSuccess.bind="_onLoginSuccess"
                        onDepositConfirmed.bind="_onDepositConfirmed"
                        onStatusUpdate.bind="_onStatusUpdate"
                        onCancel.bind="_onHome"
                        onApiError.bind="_onApiError"
                    />
                </t>
                
                <!-- Oil Deposit Screen -->
                <t t-if="state.currentScreen === 'oilDeposit'">
                    <OilDepositScreen
                        employeeDetails="state.employeeDetails"
                        onCancel.bind="_onHome"
                        onDone.bind="_onDepositConfirmed"
                        onApiError.bind="_onApiError"
                        onStatusUpdate.bind="_onStatusUpdate"
                    />
                </t>
                
                <!-- Engine Oil Deposit Screen -->
                <t t-if="state.currentScreen === 'engine_oilDeposit'">
                    <EngineOilDepositScreen
                        employeeDetails="state.employeeDetails"
                        onCancel.bind="_onHome"
                        onDone.bind="_onDepositConfirmed"
                        onApiError.bind="_onApiError"
                        onStatusUpdate.bind="_onStatusUpdate"
                    />
                </t>
                
                <!-- Rental Deposit Screen -->
                <t t-if="state.currentScreen === 'rentalDeposit'">
                    <RentalDepositScreen
                        employeeDetails="state.employeeDetails"
                        onCancel.bind="_onHome"
                        onDone.bind="_onDepositConfirmed"
                        onStatusUpdate.bind="_onStatusUpdate"
                        onApiError.bind="_onApiError"
                    />
                </t>
                
                <!-- Coffee Shop Deposit Screen -->
                <t t-if="state.currentScreen === 'coffee_shopDeposit'">
                    <CoffeeShopDepositScreen
                        employeeDetails="state.employeeDetails"
                        onCancel.bind="_onHome"
                        onDone.bind="_onDepositConfirmed"
                        onStatusUpdate.bind="_onStatusUpdate"
                        onApiError.bind="_onApiError"
                    />
                </t>
                
                <!-- Convenient Store Deposit Screen -->
                <t t-if="state.currentScreen === 'convenient_storeDeposit'">
                    <ConvenientStoreDepositScreen
                        employeeDetails="state.employeeDetails"
                        onCancel.bind="_onHome"
                        onDone.bind="_onDepositConfirmed"
                        onStatusUpdate.bind="_onStatusUpdate"
                        onApiError.bind="_onApiError"
                    />
                </t>
                
                <!-- Deposit Cash Screen -->
                <t t-if="state.currentScreen === 'deposit_cashDeposit'">
                    <DepositCashScreen
                        onCancel.bind="_onHome"
                        onDone.bind="_onDepositConfirmed"
                        onStatusUpdate.bind="_onStatusUpdate"
                        onApiError.bind="_onApiError"
                    />
                </t>
                
                <!-- Exchange Cash Screen -->
                <t t-if="state.currentScreen === 'exchange_cash'">
                    <ExchangeCashScreen
                        onCancel.bind="_onHome"
                        onExit.bind="_onHome"
                        onApiError="_onApiError"
                        onHome="_onHome"
                    />
                </t>
                
                <!-- Withdrawal Screen -->
                <t t-if="state.currentScreen === 'withdrawalAmount'">
                    <WithdrawalScreen
                        employeeDetails="state.employeeDetails"
                        onCancel.bind="_onHome"
                        onDone.bind="_onWithdrawalDone"
                        onStatusUpdate.bind="_onStatusUpdate"
                        onApiError.bind="_onApiError"
                    />
                </t>
            </div>
            
            <!-- Footer Status Bar -->
            <div class="o_cash_recycler_footer">
                <span class="status-text" t-esc="state.statusMessage || _t('Ready')"/>
            </div>
        </div>
        <BlockingOverlay/>
    </t>
</templates>